# üß™ DevOps –î–∏–ø–ª–æ–º–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî TMS School

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –æ–±—É—á–µ–Ω–∏—è –≤ **TMS School** –∏ —Å–ª—É–∂–∏—Ç –ø—Ä–∞–∫—Ç–∏–∫–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, CI/CD –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å—Ä–µ–¥—ã.

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

- –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—ã—Ç –≤:
  - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å –ø–æ–º–æ—â—å—é **Ansible**,
  - –Ω–∞—Å—Ç—Ä–æ–π–∫–µ **CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞** –Ω–∞ **Jenkins**,
  - —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Prometheus**, **Grafana**, **Alertmanager**,
  - —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ **Docker**,
  - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ —Å–≤—è–∑–∫–∏ –º–µ–∂–¥—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–±–∏—Ç –Ω–∞ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π |
|------------|-------------|
| Ansible-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jenkins | [Final-project-TMS-school](https://github.com/vladyurik/Final-project-TMS-school/tree/main/roles) |
| –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ Jenkins pipeline | [app-Diplom](https://github.com/vladyurik/app-Diplom/tree/main) |

---

## ‚öôÔ∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- **2 Linux-—Ö–æ—Å—Ç–∞ (Ubuntu 22.04)**:
  - **–•–æ—Å—Ç 1**: Ansible, Docker
  - **–•–æ—Å—Ç 2**: Docker
- –°–≤—è–∑—å –ø–æ SSH –º–µ–∂–¥—É —Ö–æ—Å—Ç–∞–º–∏ (–∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∫–æ –≤—Ç–æ—Ä–æ–º—É)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: 2 vCPU, 2 –ì–ë RAM –Ω–∞ –∫–∞–∂–¥–æ–º —Ö–æ—Å—Ç–µ

---

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å Ansible-—Ä–æ–ª—è–º–∏:

   ```bash
   git clone https://github.com/vladyurik/Final-project-TMS-school.git
   ```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—é –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `hosts.ini` —Å IP-–∞–¥—Ä–µ—Å–∞–º–∏ –≤–∞—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `group_vars/all.yml` (–Ω–∞–ø—Ä–∏–º–µ—Ä, Telegram token, IP –∏ —Ç.–¥.)

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ:

   ```bash
   ansible-playbook -i hosts.ini deploy.yml --ask-vault-pass
   ```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º —Ö–æ—Å—Ç–µ:**

![–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤](1.png)

---

## üõ† CI/CD Pipeline (Jenkins)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –ø–æ –∞–¥—Ä–µ—Å—É `http://<IP>:8080` –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ Jenkins
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Jenkins pipeline:
   - –ü–∞–π–ø–ª–∞–π–Ω —Å–∫–∞—á–∏–≤–∞–µ—Ç [–∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Flask-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä)](https://github.com/vladyurik/app-Diplom)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–æ–º `flake8`
   - –°–æ–±–∏—Ä–∞–µ—Ç Docker-–æ–±—Ä–∞–∑
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç unit-—Ç–µ—Å—Ç—ã
   - –ü—É—à–∏—Ç –∞–ª–µ—Ä—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Telegram
3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://<IP>:5000`

**–£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω:**

![Pipeline](2.png)

**–î–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä":**

![Calculator](3.png)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥

- **Prometheus** —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å Jenkins –∏ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Grafana** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–∞—Ö
- **Alertmanager** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–ª–µ—Ä—Ç—ã –≤ Telegram –ø—Ä–∏ —Å–±–æ—è—Ö –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö

**Grafana Dashboard:**

![Grafana](4.png)

**–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã –≤ Telegram:**

![–ê–ª–µ—Ä—Ç—ã](5.png)

---

## üìå –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ Docker
docker ps -a

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Jenkins
sudo systemctl restart jenkins

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ Prometheus
docker logs prometheus

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH-–¥–æ—Å—Ç—É–ø–∞
ssh user@host2
```

---

## üßØ Troubleshooting

- **Jenkins –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Java –∏ –ª–æ–≥ `/var/log/jenkins/jenkins.log`
- **Pipeline –ø–∞–¥–∞–µ—Ç –Ω–∞ –ª–∏–Ω—Ç–∏–Ω–≥–µ:** —É–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, —á—Ç–æ `flake8` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- **Alertmanager –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –∏ ID —á–∞—Ç–∞ –≤ Telegram

---

## üìÆ –ö–æ–Ω—Ç–∞–∫—Ç—ã

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: **–Æ—Ä–µ–≤–∏—á –í–ª–∞–¥–∏—Å–ª–∞–≤**  
üìß Email: [vladik.yurevch@gmail.com](mailto:vladik.yurevch@gmail.com)

---
